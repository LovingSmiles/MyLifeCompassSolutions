<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Life Compass Solutions | by LovingSmiles</title>
  <link rel="stylesheet" href="styles.css" />
 
  <script src="include.js" defer></script>

<script src="lifecompass.js"></script>

</head>
<body>
  <script src="assets/theme-applier.js"></script>
    <div id="site-header" data-include="header.html"></div>
    <div id="welcome_bar" class="card" style="display:none; margin:16px 0;">
        <h3 id="welcome_msg" style="margin:.2rem 0"></h3>
        <p id="welcome_quote" class="muted" style="margin:.2rem 0"></p>
      </div>
    <script>
        // üîí Safe Login Guard with friendly message + debug
        (function () {
          try {
            const SESS_K = 'lc_session_v1';
            const MSG_K  = 'lc_redirect_msg';
        
            // Do NOT guard the auth page itself
            if (location.pathname.endsWith('auth.html')) return;
        
            // Allow manual bypass for testing: add ?noredirect
            if (location.search.includes('noredirect')) {
              console.warn('[Guard] Login check bypassed via ?noredirect');
              return;
            }
        
            // Read session (sessionStorage first, then localStorage)
            let raw = sessionStorage.getItem(SESS_K) || localStorage.getItem(SESS_K);
            if (!raw) {
              console.warn('[Guard] No session found -> redirecting to auth.html');
              localStorage.setItem(MSG_K, 'Your session expired or you need to log in first.');
              // If auth.html is missing, don't blank the page‚Äîjust stop here
              if (document.querySelector('a[href="auth.html"]') || true) {
                location.href = 'auth.html';
              } else {
                console.error('[Guard] auth.html not found; staying on page.');
              }
              return;
            }
        
            let sess = null;
            try { sess = JSON.parse(raw); } catch { sess = null; }
        
            if (!sess || !sess.token) {
              console.warn('[Guard] Bad session format -> redirecting');
              localStorage.setItem(MSG_K, 'Your session expired or you need to log in first.');
              location.href = 'auth.html';
              return;
            }
        
            // Optional timeout (24h)
            const ONE_DAY = 24 * 60 * 60 * 1000;
            if (!sess.ts || Date.now() - sess.ts > ONE_DAY) {
              console.warn('[Guard] Session old/expired -> redirecting');
              localStorage.removeItem(SESS_K);
              sessionStorage.removeItem(SESS_K);
              localStorage.setItem(MSG_K, 'Your session has expired after 24 hours. Please sign in again.');
              location.href = 'auth.html';
            }
          } catch (e) {
            console.error('[Guard] Error in guard:', e);
            // Fail open: do nothing so page still renders
          }
        })();
        </script>  
  <!-- Background word-cloud -->
  <div class="bg">
    <div class="bg-words">
      <span class="bg-word" style="--scale:1;--dur:25s;top:20%;left:15%;">Growth</span>
      <span class="bg-word" style="--scale:1.2;--dur:35s;top:60%;left:45%;">Faith</span>
      <span class="bg-word" style="--scale:0.8;--dur:30s;top:40%;left:80%;">Stillness</span>
      <span class="bg-word" style="--scale:1.4;--dur:28s;top:75%;left:25%;">Vision</span>
      <span class="bg-word" style="--scale:1;--dur:32s;top:10%;left:70%;">Purpose</span>
    </div>
  </div>

  <!-- Header -->
  <header class="site-header">
    <div class="wrap">
      <div class="brand">My Life Compass Solutions</div>

      <link rel="stylesheet" href="lcp-nav.css">
      <script src="lcp-nav.js" defer></script>

    </div>
  </header>

  <!-- ==================== ADDED: QUOTE OF THE DAY ==================== -->
  <section id="daily-quote" class="wrap" style="margin:24px auto; max-width:900px;">
    <div id="quoteBox" class="card" style="text-align:center; padding:18px;">
      <!-- Filled by inspiration.js -->
      <div class="muted">Loading your Quote of the Day‚Ä¶</div>
    </div>

    <!-- Optional: let users contribute a quote -->
    <form id="addQuoteForm" class="card" style="margin-top:12px; padding:16px;">
      <h3 style="margin-top:0;">üí¨ Share an Inspiring Quote</h3>
      <div class="form-grid cols-2">
        <label>Quote
          <input id="quoteText" type="text" placeholder="Your uplifting message‚Ä¶" required />
        </label>
        <label>Author (optional)
          <input id="quoteAuthor" type="text" placeholder="Your name or Anonymous" />
        </label>
      </div>
      <button type="submit" class="btn btn-primary mt-2">Add Quote</button>
    </form>
  </section>
  <!-- ================== END ADDED: QUOTE OF THE DAY ================== -->

  <!-- Home Section -->
  <section id="home" class="section active wrap">
    <div class="card center stack-md">
      <h1>My Life Compass Solutions: A Way To Understand Yourself Better</h1>
      <p class="muted">
        A digital sanctuary for Spiritual, Physical, Emotional, Mental, and Financial Growth.
        Crafted by <b>LovingSmiles</b>, inspired by Stillness, Resilience, and Purpose.
      </p>
      <button class="btn btn-primary">Start My Journey</button>
    </div>
  </section>   
  <!-- Mission statement (drop-in) -->
<section id="mission" class="card" style="max-width:900px;margin:24px auto;text-align:center;padding:20px;">
  <h3 style="margin-top:0;">Privacy & Purpose - My Life Compass Solutions</h3>
  <p>At My Life Compass Solutions, we believe your memories, reflections, and growth belong to you - not to the cloud, not to advertisers, and not to big tech. Our mission is to empower individuals to live with purpose, privacy, and peace of mind by giving them full control over their personal data.</p>
  <p>Millions of people upload photos, journals, and personal content to social media or big tech platforms simply because their devices run out of space. They trade privacy for storage, often without realizing it. My Life Compass Solutions changes that.</p>
  <p>We‚Äôre building a platform designed to work anywhere, on any device - even offline - allowing users to store their progress, gratitude entries, goals, and life reflections locally first. When an internet connection becomes available, the system safely syncs using encryption so your information remains private, secure, and entirely yours.</p>
  <p>We don‚Äôt track your habits, sell your data, or show you ads. We focus on what matters most: helping you organize your life, reflect on your journey, and move toward peace and clarity. Whether you‚Äôre journaling, uploading photos, setting goals, or reviewing your progress, everything you create belongs solely to you.</p>
  <p>By design, My Life Compass Solutions provides a simple, inclusive alternative for those who don‚Äôt have high-end devices or large storage capacities. Our platform empowers everyone - regardless of technology or income - to take ownership of their digital lives without giving up privacy or functionality.</p>
  <p class="muted" style="margin-top:8px;">Your story is sacred. Your data is protected. Your life is yours to navigate.</p>
</section>

<!-- Bottom breathing room -->
<div style="height:96px;"></div> 

  <!-- Footer -->
  <footer>
    <p>Guided by Faith. Strengthened by Fire. Moved by Stillness.</p>
    <p>&copy; 2025 My Life Compass Solutions ‚Äî by LovingSmiles</p>
  </footer>

  <!-- ‚úÖ Load the Quote logic -->
  <script src="inspiration.js"></script>

<script>
    /* tiny helpers */
    const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
    const save=(k,v)=>localStorage.setItem(k, JSON.stringify(v));
    const read=(k,fb)=>{try{return JSON.parse(localStorage.getItem(k))??fb}catch{return fb}};
    const uid=()=>crypto?.randomUUID?.()||Math.random().toString(36).slice(2);
    const fmt=n=>'$'+(Number(n)||0).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});

   
    /* ---------- INIT (only runs if elements exist) ---------- */
    document.addEventListener('DOMContentLoaded', ()=>{
      // default calendar to current month
      if($('#c_year') && $('#c_month')){
        const now=new Date(); $('#c_year').value=Math.max(2025, Math.min(2125, now.getFullYear())); $('#c_month').value=now.getMonth();
        buildCal();
      }
      renderHB(); renderSP(); renderPH(); renderME(); refreshQuickFin();
    });
    // --- AI Settings Integration ---
(function(){
  const LS_API = 'aihelper_api_key';
  let OPENAI_API_KEY = localStorage.getItem(LS_API) || "";

  // Create floating settings button (‚öôÔ∏è)
  const btn = document.createElement('button');
  btn.textContent = '‚öôÔ∏è';
  Object.assign(btn.style, {
    position:'fixed', bottom:'20px', right:'20px',
    width:'48px', height:'48px',
    background:'#444', color:'#fff', border:'none',
    borderRadius:'50%', cursor:'pointer', fontSize:'20px',
    boxShadow:'0 2px 6px rgba(0,0,0,0.3)', zIndex:9999
  });
  document.body.appendChild(btn);

  // Create settings panel
  const panel = document.createElement('div');
  panel.id = 'settingsPanel';
  panel.innerHTML = `
    <h4>üîë AI Settings</h4>
    <p style="font-size:.9rem;color:#555;">Your API key is stored locally ‚Äî never uploaded.</p>
    <input id="apiKeyInput" type="password" placeholder="Enter your OpenAI API key"
      style="width:100%;padding:8px;margin-bottom:10px;border-radius:6px;border:1px solid #ccc;">
    <button id="saveKeyBtn" style="width:100%;background:#0078ff;color:#fff;border:none;padding:8px;border-radius:6px;cursor:pointer;">
      Save Key
    </button>`;
  Object.assign(panel.style,{
    position:'fixed',top:'80px',right:'20px',background:'#fff',
    border:'1px solid #ccc',borderRadius:'10px',boxShadow:'0 2px 8px rgba(0,0,0,0.2)',
    padding:'20px',width:'280px',display:'none',zIndex:9998
  });
  document.body.appendChild(panel);

  // Toggle panel visibility
  btn.addEventListener('click',()=>{
    panel.style.display=(panel.style.display==='none'||!panel.style.display)?'block':'none';
    document.getElementById('apiKeyInput').value = OPENAI_API_KEY;
  });

  // Save API key
  panel.querySelector('#saveKeyBtn').addEventListener('click',()=>{
    const key = document.getElementById('apiKeyInput').value.trim();
    localStorage.setItem(LS_API, key);
    OPENAI_API_KEY = key;
    alert('‚úÖ API key saved locally.');
    panel.style.display='none';
  });
})();
// Logout: clears local/session storage and redirects to login
document.getElementById('logoutBtn')?.addEventListener('click', () => {
  localStorage.removeItem('lc_session_v1');
  sessionStorage.removeItem('lc_session_v1');
  alert('‚úÖ You have been logged out.');
  window.location.href = 'auth.html'; // make sure this points to the right path
});
    </script>
    <script>
        (function(){
          const name  = localStorage.getItem('lc_welcome_name') || 'Friend';
          const quote = localStorage.getItem('lc_daily_quote') || '';
          const date  = localStorage.getItem('lc_daily_quote_date') || '';
        
          const bar   = document.getElementById('welcome_bar');
          const msg   = document.getElementById('welcome_msg');
          const qel   = document.getElementById('welcome_quote');
        
          if(bar && msg && qel){
            msg.textContent = `Welcome back, ${name}!`;
            qel.textContent = quote ? `‚Äú${quote}‚Äù` : '';
            bar.style.display = 'block';
          }
        
          // (Optional) If you want auto-refresh at midnight without re-login, uncomment:
          /*
          setInterval(()=>{
            const now = new Date();
            const today = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')}`;
            if (today !== date) location.reload();
          }, 5*60*1000);
          */
        })();
        </script>
        <script src="include.js" defer></script>
        <script src="lifecompass.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="/assets/search.css">
<link rel="stylesheet" href="assets/theme.css">
<script src="assets/theme.js" defer></script>

<!-- Wherever you want the controls to appear -->
<div id="theme-controls"></div>
</body>
</html>